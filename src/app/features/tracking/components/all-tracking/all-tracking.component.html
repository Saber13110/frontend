<!-- ===== BREADCRUMB ===== -->
<section class="breadcrumb">
  <div class="container">
    <nav class="breadcrumb__nav">
      <a routerLink="/" class="breadcrumb__link">Home</a>
      <span><i class="fas fa-chevron-right"></i></span>
      <span class="breadcrumb__current">Tracking</span>
    </nav>
  </div>
</section>

<!-- ===== MAIN CONTENT ===== -->
<main class="main-content">
  <div class="container">
    <h1 class="main-title">Track the way you want</h1>
    <p class="main-subtitle">
      Need the status of your shipment or proof of delivery? Enter your tracking number or reference number below.
    </p>

    <!-- ===== TRACKING TABS ===== -->
    <mat-tab-group [selectedIndex]="tabIndex" (selectedIndexChange)="tabChange($event)" class="tracking-content">

      <!-- Track by Number -->
      <mat-tab label="Tracking number">
        <div class="tracking-panel">
        <p class="tracking-description">
          Enter up to 30 of your Globex tracking, door tag, or Globex Office order numbers (one per line).
        </p>

        <form class="tracking-form" (ngSubmit)="trackPackage($event)">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Tracking number*</mat-label>
            <input matInput placeholder="Enter tracking number" [(ngModel)]="trackingNumber" name="trackingNumber" (input)="validateInput('tracking', trackingNumber)">
          </mat-form-field>

          <!-- ===== SCAN BARCODE SECTION ===== -->
          <div class="scan-section">
            <div class="scan-icon">
              <i class="fas fa-qrcode"></i>
            </div>
            <h3 class="scan-title">Scan Barcode</h3>
            <p class="scan-description">
              Use your mobile device to scan the barcode on your shipping label
            </p>
            <button 
              type="button" 
              class="scan-btn" 
              (click)="startBarcodeScanner()"
              [disabled]="isLoading">
              <i class="fas fa-camera"></i> Scan Barcode
            </button>
          </div>

          <a href="#" class="need-help">NEED HELP?</a>

          <div style="text-align: center;">
            <button mat-raised-button color="primary" type="submit" [disabled]="!isTrackingValid || isLoading">
              <span *ngIf="!isLoading">TRACK</span>
              <span *ngIf="isLoading">TRACKING...</span>
            </button>
          </div>
        </form>
        </div>
      </mat-tab>

      <!-- Track by Reference -->
      <mat-tab label="Track by reference">
        <div class="tracking-panel">
        <p class="tracking-description">
          Enter your reference number or purchase order numbers.
        </p>

        <form class="tracking-form" (ngSubmit)="trackByReference($event)">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Reference number*</mat-label>
            <input matInput placeholder="Enter reference number" [(ngModel)]="referenceNumber" name="referenceNumber" (input)="validateInput('reference', referenceNumber)">
          </mat-form-field>

          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Destination country/territory*</mat-label>
            <mat-select [(ngModel)]="selectedCountry" name="selectedCountry" (selectionChange)="validateInput('reference', referenceNumber)">
              <mat-option value="">Select country</mat-option>
              <mat-option value="FR">France</mat-option>
              <mat-option value="DE">Germany</mat-option>
              <mat-option value="ES">Spain</mat-option>
              <mat-option value="IT">Italy</mat-option>
              <mat-option value="UK">United Kingdom</mat-option>
              <mat-option value="US">United States</mat-option>
            </mat-select>
          </mat-form-field>

          <a href="#" class="need-help">NEED HELP?</a>

          <div style="text-align: center;">
            <button mat-raised-button color="primary" type="submit" [disabled]="!isReferenceValid || isLoading">
              <span *ngIf="!isLoading">TRACK</span>
              <span *ngIf="isLoading">TRACKING...</span>
            </button>
          </div>
        </form>
        </div>
      </mat-tab>

      <!-- Track by TCN -->
      <mat-tab label="Track by TCN">
        <div class="tracking-panel">
        <p class="tracking-description">
          Enter your Transportation Control Number (TCN) for government orders.<br>
          Do not use any spaces or the letters "TCN" preceding the number.
        </p>

        <form class="tracking-form" (ngSubmit)="trackByTCN($event)">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Enter TCN or tracking number*</mat-label>
            <input matInput placeholder="Enter TCN" [(ngModel)]="tcnNumber" name="tcnNumber" (input)="validateInput('tcn', tcnNumber)">
          </mat-form-field>

          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Ship date*</mat-label>
            <input matInput type="date" [(ngModel)]="shipDate" name="shipDate" (dateChange)="validateInput('tcn', tcnNumber)">
            <div mat-hint>Please enter the ship date if the package was shipped more than 14 days ago.</div>
          </mat-form-field>

          <a href="#" class="need-help">NEED HELP?</a>

          <div style="text-align: center;">
            <button mat-raised-button color="primary" type="submit" [disabled]="!isTCNValid || isLoading">
              <span *ngIf="!isLoading">TRACK</span>
              <span *ngIf="isLoading">TRACKING...</span>
            </button>
          </div>
        </form>
        </div>
      </mat-tab>

      <!-- Proof of Delivery -->
      <mat-tab label="Obtain proof of delivery">
        <div class="tracking-panel">
        <form class="tracking-form" (ngSubmit)="getProofOfDelivery($event)">
          <mat-form-field appearance="fill" class="w-100">
            <mat-label>Tracking ID*</mat-label>
            <input matInput placeholder="Enter your tracking ID" [(ngModel)]="proofNumber" name="proofNumber" (input)="validateInput('proof', proofNumber)">
          </mat-form-field>

          <div style="text-align: center;">
            <button mat-raised-button color="primary" type="submit" [disabled]="!isProofValid || isLoading">
              <span *ngIf="!isLoading">DOWNLOAD</span>
              <span *ngIf="isLoading">DOWNLOADING...</span>
            </button>
          </div>
        </form>
        </div>
      </mat-tab>

    </mat-tab-group>
  </div>
</main>

<!-- ===== TRACKING OPTIONS SECTION ===== -->
<section class="tracking-options">
  <div class="container">
    <h2 class="tracking-options__title">Tracking Options</h2>
    
    <div class="tracking-options__content">
      <div class="tracking-options__section">
        <h3>Globex Tracking</h3>
        <p class="tracking-options__description">
          Globex Tracking, the tool at the top of your page gives you shipment updates in just one click. A tool built for speed, simplicity and convenience. Save your shipments straight to our homepage, so you don't have to log in to find out where your packages are.
        </p>
      </div>
      
      <div class="tracking-options__section">
        <h3>Key Benefits</h3>
        <ul class="benefits-list">
          <li>Track in near real time without logging in</li>
          <li>Get an update in one click on the homepage</li>
          <li>Save your shipments for quick updates in near real time</li>
          <li>See all your shipments on one clear interface</li>
          <li>Create nicknames for our simplest search experience</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- ===== MOBILE TRACKING SECTION ===== -->
<section class="mobile-tracking">
  <div class="container">
    <div class="mobile-tracking__content">
      <div class="mobile-tracking__section">
        <h3>Globex Mobile Tracking</h3>
        <p class="mobile-tracking__description">
          Globex Tracking for mobile is our most convenient tracking tool, giving you updates while you're on the go so you can stay on top of your shipments 24/7 and from any location. It offers all the power of Globex Tracking in the palm of your hand.
        </p>
      </div>
      
      <div class="mobile-tracking__section">
        <h3>Key Benefits</h3>
        <ul class="benefits-list">
          <li>Track from anywhere at any time</li>
          <li>Follow your package in just one tap</li>
          <li>Stay up to date by setting automatic alerts</li>
          <li>An easy way to track with barcode scanning</li>
        </ul>
        
        <div class="app-downloads">
          <a href="#" class="app-download">
            <img src="assets/images/app-store.png" alt="Download on App Store">
          </a>
          <a href="#" class="app-download">
            <img src="assets/images/google-play.png" alt="Get it on Google Play">
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
